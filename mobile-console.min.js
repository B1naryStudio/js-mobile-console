!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.mobileConsole=t()}(this,function(){var t='<div id="jsmc-collapse"></div><div id="jsmc-clear">&#xd7</div><div id="jsmc-commands">&#x2261</div><div id="jsmc-commands-container"></div><div id="jsmc-content">\t<input id="jsmc-button" type="button" value="Run"/>\t<div id="jsmc-log">\t</div>\t<div id="jsmc-input-container">\t\t<input id="jsmc-input" type="text" placeholder="type your js here"/>\t</div></div>',s='\t<div class="jsmc-log-text"></div>\t<div class="jsmc-log-target"></div>',e={props:{showOnError:!1,proxyConsole:!0,isCollapsed:!1,catchErrors:!0},init:function(){this.commandsHash=[],this.initialized||(this.props.catchErrors&&this.bindErrorListener(),this.initializeContainers(),this.bindListeners(),this.initialized=!0,this.props.proxyConsole?this.decorateConsole():this.undecorateConsole())},options:function(e){for(var t in e)void 0!==this.props[t]&&(this.props[t]=e[t])
this.init()},show:function(e){document.getElementById("js-mobile-console")||this.init(),this.$el.container.style.display="block",e&&e.expand&&this.toggleCollapsed(!1)},hide:function(){this.$el&&this.$el.container&&(this.$el.container.style.display="none")},commands:function(e){if("object"!=typeof e)throw new Error("mobileConsole: commands method accepts object, not "+typeof e)
for(var t in this.commandsHash=e,this.commandsHashLength=0,e)e.hasOwnProperty(t)&&this.commandsHashLength++
this.commandsHashLength&&this.populateCommandsContainer_()},populateCommandsContainer_:function(){var e,t,n,o=this
for(e in this.commandsHash)this.commandsHash.hasOwnProperty(e)&&((t=document.createElement("div")).className="jsmc-command",t.innerHTML=e,t.command=this.commandsHash[e],(n=document.createElement("div")).className="jsmc-command-wrapper",n.appendChild(t),this.$el.commandsContainer.appendChild(n))
this.commandsPopulated||this.$el.commandsContainer.addEventListener("click",function(e){var t,n
"jsmc-command"===e.target.className&&(t=e.target.command,n=o.eval(t),o.logValue(t,!1,!0),o.logValue(n.text,n.error))}),this.commandsPopulated=!0},destroy:function(){var e=document.getElementById("js-mobile-console")
e.parentNode.removeChild(e)},initializeContainers:function(e){this.$el={},el=this.$el.container=document.createElement("div"),el.id="js-mobile-console",el.innerHTML=t,el.style.display="none",document.body.appendChild(el),this.$el.input=document.getElementById("jsmc-input"),this.$el.button=document.getElementById("jsmc-button"),this.$el.log=document.getElementById("jsmc-log"),this.$el.content=document.getElementById("jsmc-content"),this.$el.collapseControl=document.getElementById("jsmc-collapse"),this.$el.clearControl=document.getElementById("jsmc-clear"),this.$el.commandsControl=document.getElementById("jsmc-commands"),this.$el.commandsContainer=document.getElementById("jsmc-commands-container"),this.props.isCollapsed?(this.$el.content.style.display="none",this.$el.clearControl.style.display="none",this.$el.commandsControl.style.display="none",this.isCollapsed=!0,this.$el.collapseControl.innerHTML="&#9650;"):this.$el.collapseControl.innerHTML="&#9660;"},toggleCollapsed:function(e){this.isCollapsed="boolean"==typeof e?e:!this.isCollapsed
var t=this.isCollapsed?"none":"block"
this.$el.content.style.display=t,this.$el.collapseControl.innerHTML=this.isCollapsed?"&#9650;":"&#9660;",this.isCollapsed?(this.$el.clearControl.style.display="none",this.$el.commandsControl.style.display="none"):(this.$el.clearControl.style.display="inline-block",this.commandsHashLength&&(this.$el.commandsControl.style.display="inline-block"))},bindListeners:function(){var n=this
function t(){var e=n.$el.input.value,t=n.eval(e)
n.logValue(t.text,t.error)}this.$el.collapseControl.addEventListener("click",function(){n.toggleCollapsed()}),this.$el.clearControl.addEventListener("click",function(){n.clearLogs()}),this.$el.button.addEventListener("click",function(){t()}),this.$el.input.addEventListener("keyup",function(e){13===e.which&&t()}),this.$el.commandsControl.addEventListener("click",function(){n.toggleCommands()})},toggleCommands:function(){this.commandsShown=!this.commandsShown,this.$el.commandsContainer.style.display=this.commandsShown?"inline-block":"none"},eval:function(e){var t,n
try{t=window.eval(e)}catch(e){t=e.message,n=!0}if(JSON&&JSON.stringify)try{t=JSON.stringify(t)}catch(e){t=e.message,n=!0}return{text:t,error:n}},clearLogs:function(){this.$el.log.innerHTML=""},bindErrorListener:function(){var i=this
window.onerror=function(e,t,n,o){i.props.showOnError&&i.show({expand:!0})
var s=t+":"+n+(o?":"+o:"")
i.logValue(e,s)}},appendLogEl:function(e){this.$el.log.appendChild(e),this.$el.log.scrollTop=this.$el.log.scrollHeight},decorateConsole:function(){var o=this
function e(n){window.console[n]&&(o.nativeConsole[n]=window.console[n],window.console[n]=function(){var e,t=[].slice.call(arguments)
o.nativeConsole[n].apply(window.console,t),e=function(e){var t,n,o=[].slice.call(e)
if(JSON&&JSON.stringify)try{for(t=0;t<o.length;t++)"string"==typeof o[t]?o[t]=o[t].replace("\n","<br>"):o[t]=JSON.stringify(o[t])}catch(e){o=[e.message],n=!0}return{text:o.join(" "),error:n}}(t),o.logValue(e.text,e.error)})}this.consoleDecorated||(o.nativeConsole={},this.consoleDecorated=!0,window.console&&(e("log"),e("info"),e("warn"),e("error")))},undecorateConsole:function(){this.consoleDecorated},logValue:function(e,t,n){var o=document.createElement("div")
o.className="jsmc-log-el",o.innerHTML=s,t&&(o.className+=" jsmc-log-error"),n&&(o.className+=" jsmc-log-command"),o.getElementsByClassName("jsmc-log-text")[0].innerHTML=e,"string"==typeof t&&(o.getElementsByClassName("jsmc-log-target")[0].innerHTML=t),this.appendLogEl(o)}}
return e})
